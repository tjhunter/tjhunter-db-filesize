<!doctype html>
<html>
<head>
    <title>Dropbox Example</title>
    <link href="{{ url_for('static', filename='favicon.ico') }}" rel="icon" type="image/x-icon"/>
    <!-- jQuery -->
    <script src="{{ url_for('static', filename='jquery.min.js') }}"></script>

    <!-- Demo stuff -->
    <!--<link rel="stylesheet" href="css/jq.css">-->
    <!--<link href="css/prettify.css" rel="stylesheet">-->
    <!--<script src="js/prettify.js"></script>-->
    <!--<script src="js/docs.js"></script>-->

    <!-- Tablesorter: required -->
    <link rel="stylesheet" href="{{ url_for('static', filename='theme.blue.css') }}">
    <script src="{{ url_for('static', filename='jquery.tablesorter.js') }}"></script>

    <!-- Tablesorter: optional -->
    <!--<script src="http://mottie.github.io/tablesorter/addons/pager/jquery.tablesorter.pager.js"></script>-->
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">

    <!--Progress bar-->
    <script src="{{ url_for('static', filename='jquery-ui.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='jquery-ui.css') }}" />

    <script id="js">$(function() {

  // Taken from the documentation:
  // http://mottie.github.io/tablesorter/docs/example-parsers-advanced.html
  $.tablesorter.addParser({
    // set a unique id
    id: 'data',
    is: function(s) {
      // return false so this parser is not auto detected
      return false;
    },
    format: function(s, table, cell, cellIndex) {
      var $cell = $(cell);
      // I could have used $(cell).data(), then we get back an object which contains both
      // data-lastname & data-date; but I wanted to make this demo a bit more straight-forward
      // and easier to understand.

      // first column (zero-based index) has lastname data attribute
      if (cellIndex === 2) {
        // returns lastname data-attribute, or cell text (s) if it doesn't exist
        return $cell.attr('sortsize') || s;
      }
      // return cell text, just in case
      return s;
    },
    // set type, either numeric or text
    type: 'text'
  });

	// call the tablesorter plugin
	$("table").tablesorter({
	    theme : 'blue',
		// sort on the first column and third column in ascending order
		sortList: [[2,0]],
	    headers: {
          2 : { sorter: 'data' }
        },
	});

     // Very simple copy-paste, could be optimized...
$("div.progressbar").each(function() {
    var element = this;
    var value =  parseInt($(element).attr('value'));
  $(element).progressbar({
      value: value
  });
  });


	});


    </script>
</head>
<body>

<div class=page>
    <h1>Dropbox Example</h1>

    <div class=metanav>
        {% if not session.user %}
        <a href="{{ url_for('login') }}">Log in</a>
        {% else %}
        <a href="{{ url_for('logout') }}">Log out</a>
        {% endif %}
        {% if real_name %}
        <a href="{{ url_for('dropbox_unlink') }} " method="post">Unlink</a>
        {% endif %}
    </div>
    {% for message in get_flashed_messages() %}
    <div class=flash>{{ message }}</div>
    {% endfor %}
    {% block body %}{% endblock %}
</div>
</body>
</html>
